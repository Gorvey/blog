---
title: 重构和架构
date: 2020-11-05 17:32:28
permalink: /pages/031979/
categories:
  - 读书笔记
  - 《css重构：样式表性能调优》
tags:
  -
---

## 什么是重构

::: note 《css重构：样式表性能调优》
`重构`是指在不改变代码行为的前提下，重写代码，使其更简洁，易于复用。

`重构`是每个开发者都应该掌握的核心技能。也许你已经重构过代码了，只是没有意识到。
:::

## 软件架构

软件系统通常由很多小部件组成，每个部件擅长做一件事。将这些部件组合起来，形成更大的软件系统

`软件架构`就是用来描述软件系统的不同部件的组合方式

## 优秀软件架构的特点

### 可预测

指对软件的工作方式和结构做出准确的假设。`可预测性`表明预先的规划是合理的

在可预测的架构中，不熟悉代码的开发人员也能快速理解该架构

### 可提升代码复用性

`代码复用`是指在多处使用同一代码而无需重写。

不用重写已有代码。可以加快开发速度。并且解决某一问题的代码越少，维护用该代码实现的功能所需的事件就越少

比如在一段代码中发现问题。而项目中多次使用到该代码，只需要在一个位置修复`bug`，就可以修复其他各处的bug

### 可扩展

在系统上新增功能很容易。软件架构应适用于`增量开发`

如果项目开发需要频繁的对架构进行改动。发布将会很困难

### 软件架构和重构

重构有助于维护和提升软件架构。

`重构`指调整代码结构，使其更具意义的一套技术。可以让代码可预测，可复用，可扩展和可维护

## 为什么需要重构?

如果一开始设计和编写高质量的代码。这样不就不用重构了吗？

但是随着时间推移。一些原因导致需要重构代码。包括但不限于下面几个：

### 需求变更

软件被编写出来就是为了满足需求。如果需求变了，代码也因此改变。

如果软件开发时还有`时间要求`，可能会写出代码质量糟糕的代码。

### 架构设计不合理


### 低估了开发时间

这会导致开发人员`为了完成而完成`。如果这种情况经常发生，再完美的代码也会变得难以理解和管理

### 最佳实践过时

::: tip 例子
在css3还没有出现时，如果要在网页上展示圆角容器。需要将图片嵌入到HTML中。然后使用css定位

如今这一技术已经过时。如果你不持续更新代码，使用这些`最佳实践`。那么代码的质量会变得非常糟糕
:::


### 什么时候可以重构代码？

如果你正在修复bug或是开发新功能用到了已有代码，这时重构是很好的选择

有时候，会遇到依赖很多的代码。这些代码就像衣服上的线，抽出来的越多，散开的就越多

这时优先完成工作。然后再花点时间回头重构代码

### 什么时候不应该重构代码？

::: note
知道什么情况下不应该重构，甚至比知道什么情况下应该重构更为重要。重构名声不太
好，因为有时看起来软件开发人员只是为了重写而重写。代码也许是别人写的，没必要重
构，但患有“不是我写的症”的开发人员一定要对其重构，因为他们认为不是自己写的代
码就不是好代码。或者，有一天开发人员心血来潮，不再喜欢之前的代码编写方法（也许
之前类名使用下划线而不是连字符，现在想改过来），因此他们钻入重构的兔子洞以求止
痒。很多情况下，这些工作被视为“磨洋工”，它让人们感觉效率很高，事实上并非如此。
第 5 章将讨论如何通过编写一套编码规范形成编码计划。那时，你将更加清楚，仅当重构
能够改善架构或使代码符合编码规范时，才应进行重构。
:::

### 重构自己的代码

如果是自己的个人项目。那么肯定能

如果是公司项目。虽然每个人都知道重构的重要性。但现实往往并非如此

只需要注意一件事

::: tip
只重构改善架构的代码和使代码符合规范
:::